# Ask AI Widget - Build Instructions

## ğŸ“ é¡¹ç›®ç»“æ„

```
docs/sphinx_doc/source/_static/
â”œâ”€â”€ ask-ai-modules/              # æ¨¡å—åŒ–æºä»£ç 
â”‚   â”œâ”€â”€ ask-ai-i18n.js          # å›½é™…åŒ–é…ç½®
â”‚   â”œâ”€â”€ ask-ai-api.js           # API é€šä¿¡å±‚
â”‚   â”œâ”€â”€ ask-ai-ui.js            # UI æ¸²æŸ“å’Œäº¤äº’
â”‚   â””â”€â”€ ask-ai-widget.js        # ä¸»æ§åˆ¶å™¨
â”œâ”€â”€ ask-ai-widget.js            # æ‰“åŒ…åçš„å•æ–‡ä»¶ï¼ˆç”¨äºç”Ÿäº§ï¼‰
â”œâ”€â”€ ask-ai-widget.js.backup     # åŸå§‹æ–‡ä»¶å¤‡ä»½
â”œâ”€â”€ package.json                # Node.js ä¾èµ–é…ç½®
â”œâ”€â”€ rollup.config.js            # Rollup æ‰“åŒ…é…ç½®
â””â”€â”€ BUILD.md                    # æœ¬æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

åœ¨ `docs/sphinx_doc/source/_static/` ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
npm install
```

### 2. æ„å»ºæ‰“åŒ…æ–‡ä»¶

```bash
npm run build
```

è¿™å°†ä¼šï¼š
- è¯»å– `ask-ai-modules/` ç›®å½•ä¸‹çš„æ‰€æœ‰æ¨¡å—
- ä½¿ç”¨ Rollup å°†å®ƒä»¬æ‰“åŒ…æˆå•ä¸ªæ–‡ä»¶
- è¾“å‡ºåˆ° `ask-ai-widget.js`ï¼ˆè¦†ç›–åŸæ–‡ä»¶ï¼‰

### 3. å¼€å‘æ¨¡å¼ï¼ˆç›‘å¬æ–‡ä»¶å˜åŒ–ï¼‰

```bash
npm run watch
```

åœ¨å¼€å‘æ¨¡å¼ä¸‹ï¼Œä»»ä½•å¯¹ `ask-ai-modules/` ä¸­æ–‡ä»¶çš„ä¿®æ”¹éƒ½ä¼šè‡ªåŠ¨è§¦å‘é‡æ–°æ‰“åŒ…ã€‚

## ğŸ“ æ¨¡å—è¯´æ˜

### ask-ai-i18n.js
- **åŠŸèƒ½**ï¼šå›½é™…åŒ–é…ç½®
- **å¯¼å‡º**ï¼š`I18N` å¯¹è±¡å’Œ `detectLanguage()` å‡½æ•°
- **å¤§å°**ï¼šçº¦ 2KB

### ask-ai-api.js
- **åŠŸèƒ½**ï¼šAPI é€šä¿¡å±‚
- **å¯¼å‡º**ï¼š`AskAIApi` ç±»
- **èŒè´£**ï¼š
  - API è¿æ¥æ£€æŸ¥
  - ä¼šè¯å†å²åŠ è½½
  - æµå¼å“åº”å¤„ç†
  - ä¼šè¯æ¸…é™¤
- **å¤§å°**ï¼šçº¦ 8KB

### ask-ai-ui.js
- **åŠŸèƒ½**ï¼šUI æ¸²æŸ“å’Œäº¤äº’
- **å¯¼å‡º**ï¼š`AskAIUI` ç±»
- **èŒè´£**ï¼š
  - DOM åˆ›å»ºå’Œç®¡ç†
  - äº‹ä»¶ç»‘å®š
  - æ¶ˆæ¯æ¸²æŸ“
  - ä¸»é¢˜åˆ‡æ¢
  - Markdown æ¸²æŸ“
- **å¤§å°**ï¼šçº¦ 12KB

### ask-ai-widget.js
- **åŠŸèƒ½**ï¼šä¸»æ§åˆ¶å™¨
- **å¯¼å‡º**ï¼š`AskAIWidget` ç±»ï¼ˆé»˜è®¤å¯¼å‡ºï¼‰
- **èŒè´£**ï¼š
  - æ•´åˆæ‰€æœ‰æ¨¡å—
  - åˆå§‹åŒ–æµç¨‹
  - ä¸šåŠ¡é€»è¾‘åè°ƒ
- **å¤§å°**ï¼šçº¦ 4KB

## ğŸ”§ ä¿®æ”¹ä»£ç 

### ä¿®æ”¹æµç¨‹

1. **ç¼–è¾‘æ¨¡å—æ–‡ä»¶**ï¼šåœ¨ `ask-ai-modules/` ç›®å½•ä¸‹ä¿®æ”¹å¯¹åº”çš„æ¨¡å—
2. **é‡æ–°æ„å»º**ï¼šè¿è¡Œ `npm run build`
3. **æµ‹è¯•**ï¼šåœ¨æµè§ˆå™¨ä¸­æµ‹è¯•æ‰“åŒ…åçš„æ–‡ä»¶

### æ·»åŠ æ–°åŠŸèƒ½

å¦‚æœéœ€è¦æ·»åŠ æ–°åŠŸèƒ½ï¼š

1. ç¡®å®šåŠŸèƒ½å±äºå“ªä¸ªæ¨¡å—ï¼ˆI18Nã€APIã€UI æˆ–ä¸»æ§åˆ¶å™¨ï¼‰
2. åœ¨å¯¹åº”æ¨¡å—ä¸­æ·»åŠ ä»£ç 
3. å¦‚æœéœ€è¦è·¨æ¨¡å—è°ƒç”¨ï¼Œé€šè¿‡å¯¼å‡º/å¯¼å…¥æœºåˆ¶å®ç°
4. é‡æ–°æ„å»ºå¹¶æµ‹è¯•

## ğŸ“¦ æ‰“åŒ…è¯´æ˜

### æ‰“åŒ…é…ç½®è¯´æ˜

`rollup.config.js` é…ç½®ï¼š

```javascript
{
  input: 'ask-ai-modules/ask-ai-widget.js',  // å…¥å£æ–‡ä»¶
  output: {
    file: 'ask-ai-widget.js',                 // è¾“å‡ºæ–‡ä»¶
    format: 'iife',                           // ç«‹å³æ‰§è¡Œå‡½æ•°æ ¼å¼
    name: 'AskAIWidget',                      // å…¨å±€å˜é‡å
    globals: { marked: 'marked' }             // å¤–éƒ¨ä¾èµ–æ˜ å°„
  },
  external: ['marked']                        // ä¸æ‰“åŒ… marked åº“
}
```

## ğŸ” æ•…éšœæ’æŸ¥

### æ„å»ºå¤±è´¥

å¦‚æœæ„å»ºå¤±è´¥ï¼Œæ£€æŸ¥ï¼š

1. Node.js ç‰ˆæœ¬æ˜¯å¦ >= 14
2. ä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…ï¼ˆ`npm install`ï¼‰
3. æ¨¡å—æ–‡ä»¶ä¸­æ˜¯å¦æœ‰è¯­æ³•é”™è¯¯

### åŠŸèƒ½å¼‚å¸¸

å¦‚æœæ‰“åŒ…ååŠŸèƒ½å¼‚å¸¸ï¼š

1. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°é”™è¯¯
2. ç¡®è®¤ marked.js å·²æ­£ç¡®åŠ è½½

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Rollup å®˜æ–¹æ–‡æ¡£](https://rollupjs.org/)
- [ES6 æ¨¡å—è§„èŒƒ](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Modules)
- [Sphinx æ–‡æ¡£](https://www.sphinx-doc.org/)
